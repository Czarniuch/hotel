<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="./css/menufonts.css">
    <style>
        a {
            color: whitesmoke !important;
        }

        h2 {
            text-align: center;
        }

        input {
            border: 1px solid goldenrod !important;
            color:whitesmoke !important;
        }
  
        .mySpan {
            color: whitesmoke;
            border: 1px solid goldenrod !important;
        }

        .submitBtn {
            background-color: goldenrod;
            border-radius: 5px;
        }
    </style>
    <script>
        if(document.cookie)
        window.location.href = "./userProfile.html";
    </script>
</head>

<body>
    <div class="logoDiv">
        <a href="index.html"><img src="https://warszawa.intercontinental.com/wp-content/themes/intercontinental/img/svg/logo.svg" alt="Nowoczesny hotel w sercu miasta – Hotel InterContinental Warszawa Centrum"></a>

    </div>
    <div class="container">
    <div class="d-flex flex-column loginContainer">
    <div>
    <h2>Zaloguj się</h2>
    <form class="d-flex p-4 row" id="loginForm">
        <div class="input-group mb-3">
            <span class="input-group-text bg-dark mySpan">@</span>
            <input type="text" name="email" class="form-control bg-dark" placeholder="E-mail" aria-label="E-mail" aria-describedby="basic-addon1">
          </div>
          <div class="input-group mb-3">
            <span class="input-group-text bg-dark mySpan">#</span>
            <input type="password" name="password" class="form-control bg-dark" placeholder="Hasło" aria-label="Hasło" aria-describedby="basic-addon1">
          </div>
        <input type="submit" class="submitBtn" value="Zaloguj się">
    </form>
    </div>
    <br>
    <div>
    <h2>Zarejestruj się</h2>
    <form class="d-flex p-4 row" id="registerForm">
        <div class="input-group mb-3">
            <span class="input-group-text bg-dark mySpan"></span>
            <input type="text" name="firstname" class="form-control bg-dark" placeholder="Imie" aria-label="Imie" aria-describedby="basic-addon1">
          </div>
          <div class="input-group mb-3">
            <span class="input-group-text bg-dark mySpan"></span>
            <input type="text" name="lastname" class="form-control bg-dark" placeholder="Nazwisko" aria-label="Nazwisko" aria-describedby="basic-addon1">
          </div>
          <div class="input-group mb-3">
            <span class="input-group-text bg-dark mySpan">@</span>
            <input type="text" name="email" class="form-control bg-dark" placeholder="E-mail" aria-label="E-mail" aria-describedby="basic-addon1">
          </div>
          <div class="input-group mb-3">
            <span class="input-group-text bg-dark mySpan">#</span>
            <input type="password" name="password" class="form-control bg-dark" placeholder="Hasło" aria-label="Hasło" aria-describedby="basic-addon1">
          </div>
        <div class="input-group mb-3">
            <span class="input-group-text bg-dark mySpan"></span>
            <input type="number" name="phonenumber" class="form-control bg-dark" placeholder="Numer telefonu" aria-label="Numer telefonu" aria-describedby="basic-addon1">
          </div>
        <input type="submit" class="submitBtn" value="Zarejestruj się">
    </form>
    </div>
    </div>
    </div>
    <footer class="mobileFooter">
        <div>
            ADRES <br> ul.Emilii Plater 49 <br> 00-125 Warszawa, Polska <br>
            <br> Telefon: +48 22 328 8888, <br> Fax: +48 22 328 8889 <br> Zarezerwuj online <br> lub zadzwoń: 00 800 121 5820 <br>
            <br> Email: warsaw@ihg.com<br> Konferencje i bankiety: wrs.convention@ihg.com<br>
            <br> Zameldowanie: 15:00<br> Wymeldowanie: 12:00<br>
        </div>
        <div style="padding-top: 20px; background-color: rgb(41, 41, 41);">
            Copyright © warszawa.intercontinental.com 2017. IHG. All rights reserved. This hotel is owned by WestInvest Gesellschaft für Investmentfonds mbH and is managed by InterContinental Hotels Group.
        </div>
    </footer>
    <nav class="nav justify-content-between fixed-bottom nav-pills mobileNav dropup">
        <button type="button" class="btn dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false" style="color:whitesmoke;">
            <i class="demo-icon icon-menu"></i>
          </button>
        <ul class="dropdown-menu dropdown-menu-dark w-100">
            <li><a href="login.html">Konto</a></li>
            <li><a href="rooms.html">Pokoje</a></li>
            <li><a href="gallery.html">Galeria</a></li>
            <li><a href="index.html">Strona główna</a></li>
        </ul>
        <a href="tel:+48223288888" class="flex-sm-fill text-sm-center nav-link"><i class="demo-icon icon-phone"></i></a>
        <div style="background-color: goldenrod;padding-left: 15px; padding-right: 15px;"><a class="flex-sm-fill text-sm-center nav-link" href="#">Rezerwuj online</a></div>

    </nav>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>

    <script>
        function prepareData(dataToCode) {
            const dataPart = [];
            for (let key in dataToCode) {
                dataPart.push(encodeURIComponent(key) + "=" + encodeURIComponent(dataToCode[key]));
            }
            return dataPart.join("&").replace(/%20/g, "+");
        }

        document.querySelector('#loginForm').addEventListener('submit', event => {
            event.preventDefault();

            const mail = document.querySelector('#loginForm input[name=email]').value;
            const passw = document.querySelector('#loginForm input[name=password]').value;

            const data = {
                email: mail,
                password: passw
            }

            const dataToSend = prepareData(data);

            console.log(data);
            fetch("http://localhost:8000/user", {
                method: 'POST',
                headers: {
                    'Content-Type': "application/x-www-form-urlencoded"
                },
                body: dataToSend
            }).then(res => {
                if (res.ok) {
                    document.cookie = "logged=true";
                   // window.location.href = "./index.html";
                }
            });
        })

        document.querySelector('#registerForm').addEventListener('submit', event => {
            event.preventDefault();

            const fname = document.querySelector('#registerForm input[name=firstname]').value;
            const lname = document.querySelector('#registerForm input[name=lastname]').value;
            const mail = document.querySelector('#registerForm input[name=email]').value;
            const passw = document.querySelector('#registerForm input[name=password]').value;
            const phone = document.querySelector('#registerForm input[name=phonenumber]').value;

            const data = {
                firstName: fname,
                lastName: lname,
                email: mail,
                password: passw,
                phoneNumber: phone
            }

            const dataToSend = prepareData(data);
            fetch("http://localhost:8000/addUser", {
                    method: 'POST',
                    headers: {
                        'Content-Type': "application/x-www-form-urlencoded"
                    },
                    body: dataToSend
                })
                .then(res => {
                    if (res.ok)
                        alert("zarejestrowano");
                })
        })
    </script>
</body>

</html>